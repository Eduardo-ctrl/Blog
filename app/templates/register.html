
<!DOCTYPE html>
<html>
<head>
		<meta charset="utf-8">
		<link href="static/css/login_reglogin.css" rel='stylesheet' type='text/css' />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="/static/js/jquery-1.11.3.js"></script>
</head>
<body>
		<div class="bg">
				<img src="static/images/c.jpg" alt="">
			</div>
	<div class="main">
		<div class="header" >
			<h1>创建一个新账户！</h1>
		</div>
		<p></p>
			<form action="/register" method="post">
				<ul class="left-form">
					<h2>新账户:</h2>
					<li>
            			<input type="text" name="loginname" placeholder="请输入登录名" required/>
						<div class="clear"> </div>
					</li>
					<li>
            			<input type="text" name="username" placeholder="请输入用户名" required/>
						<div class="clear"> </div>
					</li> 
					<li>
            			<input type="email" name="email" placeholder="请输入邮箱" required/>
						<div class="clear"> </div>
					</li> 
					<li>
            			<input type="url" name="url" placeholder="请输入个人主站地址" required/>
						<div class="clear"> </div>
					</li> 
					<li>
            			<input type="password" name="password" placeholder="请输入密码" required/>
						<div class="clear"> </div>
          			</li>
				    <li>
					    <input type="password" name="password" placeholder="请再次确认密码" required/>
					    <div class="clear"> </div>
					</li>
					<!--用于记录注册跳转来源，方便注册之后跳转之前的页面-->
          			<input type="hidden" name="source_url" value="">
					<input type="submit" value="创建并登录">
					<div class="clear"> </div>
				</ul>
				<div class="clear"> </div>
			</form>
	</div>
</body>
<script>
	$(function(){
		<!--验证登录名-->
		$(".left-form input:first").blur(function(){
			$.ajax({
				"url":"/register_test",
				"type":"get",
				"data":"loginname=" + $(".left-form input:first").val(),
				"dataType":"json",
				"success":function(data){
					if (data){
						alert("登录名已存在");
						$(".left-form input:first").val("");
					};
				}
			});
		});
		<!--验证密码是否一致-->
		$(".left-form>li>input:last").blur(function(){
			console.log($(".left-form>li>input:eq(4)").val());
			console.log($(".left-form>li>input:last").val());
			if ($(".left-form>li>input:last").val() != $(".left-form>li>input:eq(4)").val()){
				alert("密码不一致");
				$(".left-form>li>input:eq(4)").val("");
				$(".left-form>li>input:last").val("");
			};
		});
	})
</script>
</html>